{% extends 'base.html.twig' %}

{% block title %}List Des Spectacles{% endblock %}

{% block body %}
    <style>
        .button {
            margin: 5px 0 -20px 8px !important;
            padding: 5px;
            background-color: #eab3ac;
            border: #eab3ac solid 2px;
        }

        div.dataTables_wrapper div.dataTables_paginate ul.pagination {
            display: none;
        }

        .col-md-6 {
            margin-right: 190px !important;
        }
    </style>
    <div class="wrapper">
        <div class="content-wrapper">
            <section class="content">
                <div class="container-fluid">
                    <div>
                        <div class="card-body">
                            <!-- Spectacle Table -->
                            <table id="spectacleTable" class="table table-bordered table-striped">
                                <thead>
                                <tr>
                                    <th>ID</th>
                                    <th>Title</th>
                                    <th>Images</th>
                                    <th>Release Date</th>
                                    <th>Type</th>
                                    <th>Actions</th>
                                </tr>
                                </thead>

                                <tbody>
                                {% for spectacle in spectacles %}
                                    <tr align="center" valign="middle">
                                        <td align="center" vertical-align="middle">{{ spectacle.id }}</td>
                                        <td align="center" vertical-align="middle">{{ spectacle.titre }}</td>
                                        <td align="center" vertical-align="middle">
                                            <img src="{{ asset('dist/img/' ~ spectacle.imagePath) }}"
                                                 alt="Image du spectacle {{ spectacle.titre }}"
                                                 title="Image du spectacle '{{ spectacle.titre }}'"
                                                 width="80px">
                                        </td>
                                        <td align="center"
                                            vertical-align="middle">{{ spectacle.date.format('d-m-Y') }}</td>
                                        <td align="center" VALIGN="BOTTOM">{{ spectacle.genre }}</td>
                                        <td align="center" vertical-align="middle">
                                            <a style="color: white;background-color: #2c3e50!important"
                                               href="/shows/edit/{{ spectacle.id }}" class="btn  mr-1"><i
                                                        class="fa fa-edit"></i></a>
                                            <a style="color: white;background-color: #eab3ac"
                                               href="/shows/delete/{{ spectacle.id }}" class="btn "><i
                                                        class="fa fa-trash-alt"></i></a>
                                        </td>
                                    </tr>
                                {% endfor %}
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
        </div>
        </section>
    </div>
    <footer class="main-footer" style="text-align: center">
        <strong>Copyright &copy; 2021 <a style="color: #eab3ac" href="https://adminlte.io">Infinite
                Loop</a>.</strong> All rights reserved.
    </footer>
    </div>

{% endblock %}
{% block javascripts %}


    <script>
        $(function () {
            console.log("Script working properly ds spectacle list");
            var spectacleTable = $("#spectacleTable").DataTable({
                "responsive": true, "lengthChange": false, "autoWidth": false,
                "buttons": [
                    "excel",
                    "pdf",
                    "print",
                    "colvis"
                ],
            });
            spectacleTable.buttons().container().appendTo('#spectacleTable_wrapper .col-md-6:eq(0)');
            var addSpecBtn = '<a href="/shows/new" type="button" style="color: white;background-color: #eab3ac" class="btn btn-block  ml-2 col-md-1" id="ajouterSpec">' +
                '<span class="fa fa-plus-circle mr-2"></span>Add</a>';

            {# var addSpecBtn = "<span>{{ render(controller('App\\Controller\\SpectacleController::creer_spectacle'))}}</span>"; #}

            var spectacleTable_wrapper = document.getElementById("spectacleTable_wrapper");
            spectacleTable_wrapper.childNodes[0].insertAdjacentHTML("afterbegin", addSpecBtn);
            spectacleTable_wrapper.childNodes[0].childNodes[2].classList.remove("col-md-6");
            spectacleTable_wrapper.childNodes[0].childNodes[2].classList.add("col-md-3");
        });

        $('#ajouterSpec').click(function (e) {
            e.preventDefault();
        });
    </script>
{% endblock %}
